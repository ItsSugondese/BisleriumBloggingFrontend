<ng-container>
  <div>
    {{arrivalTime}}

    <div id="filter-header" class="flex w-full justify-between items-center mb-3 bg-white p-2 rounded-lg">

      <div class="left-filter-header">
        <div *ngFor="let option of foodFilter"
          class="radio-container  inline-block rounded-2xl ml-2 p-1 px-3 first:ml-0  text-customPrimary bg-nonSelectedFoodFilterBg"
          [ngClass]="{
    'bg-red-700': selectedNum === option.id,
    'text-white': selectedNum === option.id
  }" (click)="selectOption(option.id)">

          <label class="hover:cursor-pointer" for="{{ option.label }}">{{ option.label }}</label>
        </div>
      </div>


      <div class="filter-header-right flex  items-center">
        <div
          class="p-1 px-2 w-64 bg-white mt-1 relative rounded-md shadow-sm flex border-2 border-[#CED4DA] focus-within:border-customPrimary ">
          <input type="text" id="search" name="search" class="block w-full sm:text-sm  focus:outline-none"
            placeholder="Search">
          <!-- [(ngModel)]="searchData"> -->
          <mat-icon class="">search</mat-icon>
        </div>



      </div>
    </div>


  </div>
  <!-- shows food list -->

  <div fxLayout="row wrap" [fxLayoutGap]="'20px grid'" fxLayoutAlign="start">
    <div [fxFlex.lg]="'25%'" [fxFlex.xs]="'100%'" [fxFlex.sm]="'50%'" [fxFlex.md]="'33%'" class="card-deck"
      *ngFor="let item of foodMenuList" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">

      <div class="rounded  w-fit  bg-white">
        <div class="w-full ">
          <div class="px-3">
            <div
              class="image-container w-64 h-40   p-3 px-0 object-cover overflow-hidden rounded-sm flex justify-center ">
              <img [src]="imageDataMap[item.photoId]" class="rounded-sm w-full object-cover">
            </div>
            <div class="header justify-between  pb-4">
              <div class="top-level-header flex">
                <div class="mr-3 font-bold text-2xl">{{item.name}}</div>

                <div class="rounded-lg text-[#1565C0]  p-1 px-2 text-sm bg-blue-200">
                  <!-- {{item.isPackage ? 'Package' : 'Individual'}} -->
                  {{item.foodType}}
                </div>

              </div>

              <h1 class="font-semibold text-xl text-priceColor">Rs. {{item.cost}}</h1>
            </div>

            <div class=" w-full pb-3">

              <button class="w-full text-center border-re hover:cursor-pointer 
              bg-white items-center border-2 border-customPrimary
               text-customPrimary rounded-lg  p-2 text-base" (click)="orderPopUp(item)">
                View Details</button>

            </div>


          </div>
        </div>
      </div>

      <!-- <div class="card" (click)="orderPopUp(item)">
      <img [src]="imageDataMap[item.photoId]" width="50" height="50" alt="Food Picture">
      <div class="card-body">
        <h5 class="card-title">{{item.name}}</h5>
        <p class="card-text hidden">{{item.id}}</p>

        <p class="card-text">Rs. {{item.cost}}</p>
      </div>
    </div> -->
    </div>
  </div>







  <!-- For editing how much of the item we want -->
  <div class="modal fade" id="exampleModal" data-backdrop="static" data-keyboard="false" [ngClass]="{'show': showPopUp}"
    *ngIf="selectedFoodMenu">
    <div class="modal-dialog" role="document">
      <div class="modal-content p-3 ">
        <div class="dialog-header flex justify-between items-center">
          <div class="title-combine">
            <div class="top-level-header flex items-end">
              <div class="mr-3 font-semibold text-xl">{{selectedFoodMenu.name}}</div>

              <div class="rounded-lg text-[#1565C0] flex items-center  text-center p-0.5 px-2   text-sm bg-blue-200">
                <!-- {{item.isPackage ? 'Package' : 'Individual'}} -->
                {{selectedFoodMenu.foodType}}
              </div>

            </div>
          </div>
          <mat-icon class="text-lg hover:cursor-pointer " (click)="togglePopUp()" data-dismiss="modal">close</mat-icon>
        </div>
        <div class="dialog-item-details ">
          <div class="item-image flex justify-center">
            <div class="image-container w-64 h-40   p-3 px-0 object-cover overflow-hidden rounded-sm flex text-center ">
              <img [src]="selectedImageDataMap" class="rounded-sm w-full object-cover">
            </div>
          </div>
          
          <div class="item-description flex flex-col">
            <span class="text-[#6C757D] text-lg">Description</span>
            <span class="text-base">
              {{ selectedFoodMenu.description == null ? selectedFoodMenu.name : selectedFoodMenu.description }}
            </span>  
          </div>
        </div>
      
          <form class="my-4">
            <div class="flex justify-center  ">
              <div class="text-[#343A40] ">Quantity:</div>

              <input class="ml-4 w-20 border-2 text-center p-0 border-[#CED4DA] focus:border-customPrimary  focus:outline-none" id="quantity" [(ngModel)]="quantity" name="quantity">

            </div>
            <div class="text-center" *ngIf="quantity">
              Rs. {{selectedFoodMenu.cost * quantity}}
            </div>
          </form>
   
        <div class="flex justify-center">
          <button type="submit" data-dismiss="modal"
          [ngClass]="{'disabled-button': quantity == null || quantity < 1}" (click)="selectedOrder(selectedFoodMenu, quantity!)"
          class="text-white bg-customPrimary hover:cursor-pointer  items-center rounded px-2  py-1.5 text-base">Select</button>
          <!-- <button type="button" class="btn btn-primary" data-dismiss="modal"
            [ngClass]="{'disabled-button': quantity < 1}" (click)="selectedOrder(selectedFoodMenu, quantity)">Send
            message</button> -->

        </div>
      </div>
    </div>
  </div>



  <!-- For showing selected items to order -->
  <p-dialog header="{{comingToEdit? 'Editing' : 'Making'}} Order" [(visible)]="visible" [position]="position"
    [closable]="false" *ngIf="foodOrderList.length > 0">
    <ol>
      <li *ngFor="let item of foodOrderList; let i= index">
        <div>
          <span data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo"
            (click)="orderPopUp(item.selectedFoodMenu)"> {{item.selectedFoodMenu.name}} - {{item.quantity}} </span>
          <button class="btn btn-outline-secondary" type="button" (click)="removeOrderItem(i, 'dialog')">
            <i class="bi bi-trash-fill"></i>
          </button>
        </div>
      </li>
    </ol>
    <button class="btn-danger" type="text" data-toggle="modal" data-target="#finalPopUpModal" data-whatever="@mdo"
      (click)="orderItemScreen(foodOrderList)"> Order</button>
    <button class="btn-danger" type="text" data-toggle="modal" data-target="#finalPopUpModal" data-whatever="@mdo"
      (click)="cancelEdit()" *ngIf="comingToEdit"> Cancel</button>
  </p-dialog>






  <!-- For ordering at the end with arrival time -->
  <div class="modal " id="finalPopUpModal" data-backdrop="static" data-keyboard="false" [ngClass]="{'show': finalPopUp}"
    *ngIf="foodOrderList.length > 0">
    <div class="modal-dialog hidden" role="document" [ngClass]="{'hidden' : isOrderSuccessful}">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Order foods</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="toggleFinalPopUp()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <table id="example" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th></th>
                <th>FoodName</th>
                <th>Quanity Ordered</th>
                <th>Total Price</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of foodOrderList; let i = index">
                <td><img [src]="data.imageSrc" width="50" height="50" alt="Food Picture"></td>
                <td>{{data.selectedFoodMenu.name}}</td>
                <td><input type="number" [(ngModel)]="data.quantity" [ngClass]="{ 'is-invalid': data.quantity<1}"
                    (keyup.enter)="onEnterPress($event, i)" (blur)="onInputBlur(i)" #quantityInput></td>
                <td>{{data.selectedFoodMenu.cost * data.quantity}} ({{data.selectedFoodMenu.cost}} each)</td>
                <td><button class="btn btn-outline-secondary" type="button" data-dismiss="modal"
                    (click)="removeOrderItem(i, 'finalOrder')">
                    <i class="bi bi-trash-fill"></i>
                  </button> </td>
              </tr>
            </tbody>
          </table>

          <input type="time" [(ngModel)]="arrivalTime">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal"
            (click)="toggleFinalPopUp()">Close</button>
          <button type="button" class="btn btn-primary"
            [ngClass]="{'disabled-button': foodOrderList.length < 1 || arrivalTime == '' || !isPostButtonActive}"
            (click)="postOrder(foodOrderList, arrivalTime)">Send message</button>


        </div>
      </div>
    </div>

    <div class="modal-dialog " role="document" [ngClass]="{'hidden' : !isOrderSuccessful}">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Order Successful</h5>
        </div>
        <div class="modal-body">

          Your order code is <b>{{orderCode}}</b>
          <br>
          <button (click)="reloadPage()">Ok</button>
        </div>

      </div>
    </div>
  </div>





</ng-container>